<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<!--框架必需start-->
	<script type="text/javascript" src="../js/jquery-1.4.js"></script>
	<script type="text/javascript" src="../js/framework.js"></script>
	<link href="../css/import_basic.css" rel="stylesheet" type="text/css"/>
	<link  rel="stylesheet" type="text/css" id="skin"/>
	<script src="../js/form/stepForm.js" type="text/javascript"></script>
	<!--框架必需end-->
	<script type="text/javascript">
		$(function(){
			$("#copyBtn").live("click",function(){
				//克隆按钮所在的tr并添加到table的末尾
				$(this).parents("table").find("tr").last().clone(true).appendTo($(this).parents("table"));
				
				//改变序号
				var $ltd = $(this).parents("table").find("tr").last().children('td');
				var num = parseInt($ltd.eq(2).html())+1;
				$ltd.eq(2).html(num);
				
				//日期和星期为空
				$ltd.eq(0).html("");
				$ltd.eq(1).html("");
				
				
				//找到table最后一个tr的最后一个td中的button按钮
				var $lastBtn=$(this).parents("table").find("tr").last().find("td").last().find("input[type='button']");
				//更改按钮的显示文字
				$lastBtn.val("删除");
				//修正按钮在复制时产生的样式错误
				$lastBtn.removeClass("button_hover");
				$lastBtn.addClass("button")
				//对该按钮重新监听点击事件
				$lastBtn.click(function(e){
					//阻止默认行为，即复制行为
					e.stopPropagation();
					//将所在的行删除
					$(this).parents("tr").remove()
				})
			})
		});
		
		//开始编制
		function editInput(){
			$("#editTable").show();
		}
	</script>
</head>
<body>
<div class="box2" panelTitle="检修计划" roller="false">
		<table>
			<tr>
				<td>开始日期：</td>
				<td><input type="text" class="date"/></td>
				<td>截止日期：</td>
				<td><input type="text" class="date"/></td>
				<td>计划标题：</td>
				<td><input type="text"/></td>
				<td><input type="checkbox" checked="checked"/>过滤周末</td>
				<td><button onclick="editInput();"><span class="icon_edit">开始编制</span></button></td>
				<td><a href="" style="color: red;">excel模板下载</a></td>
			</tr>
		</table>
	</div>
<div id="editTable" style="display: none;">
	<div>
		<table class="tableStyle" headFixMode="true" useMultColor="true">
			<tr>
				<td colspan="10">
					<button><span class="icon_save">保存计划</span></button>&nbsp;
					<button><span class="icon_xls">Excel导入</span></button>&nbsp;
					<button><span class="icon_reply">发布计划</span></button>
				</td>
			</tr>
			<tr>
				<th width="80">日期</th>
				<th width="80">星期</th>
				<th width="25">序号</th>
				<th width="80">机型</th>
				<th width="80">机号</th>
				<th width="80">修程</th>
				<th width="80">公里</th>
				<th width="80">扣修地点</th>
				<th>备注</th>
				<th width="80"></th>
			</tr>
		</table>
	</div>
	<div id="scrollContent">
		<table class="tableStyle"  useMultColor="true" useCheckBox="true">
			<tr>
				<td width="80">2013-12-12</td>
				<td width="80">星期一</td>
				<td width="25">1</td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td><input type="text"/></td>
				<td width="80"><input type="button" value="增加" id="copyBtn"/></td>
			</tr>
		</table>
		<table class="tableStyle"  useMultColor="true" useCheckBox="true">
			<tr>
				<td width="80">2013-12-13</td>
				<td width="80">星期二</td>
				<td width="25">1</td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td><input type="text"/></td>
				<td width="80"><input type="button" value="增加" id="copyBtn"/></td>
			</tr>
		</table>
		<table class="tableStyle"  useMultColor="true" useCheckBox="true">
			<tr>
				<td width="80">2013-12-14</td>
				<td width="80">星期三</td>
				<td width="25">1</td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td><input type="text"/></td>
				<td width="80"><input type="button" value="增加" id="copyBtn"/></td>
			</tr>
		</table>
			<table class="tableStyle"  useMultColor="true" useCheckBox="true">
			<tr>
				<td width="80">2013-12-15</td>
				<td width="80">星期四</td>
				<td width="25">1</td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td><input type="text"/></td>
				<td width="80"><input type="button" value="增加" id="copyBtn"/></td>
			</tr>
		</table>
			<table class="tableStyle"  useMultColor="true" useCheckBox="true">
			<tr>
				<td width="80">2013-12-15</td>
				<td width="80">星期五</td>
				<td width="25">1</td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td width="80"><input type="text" style="width: 70px"/></td>
				<td><input type="text"/></td>
				<td width="80"><input type="button" value="增加" id="copyBtn"/></td>
			</tr>
		</table>
	</div>
	<div style="height:40px;"></div>
</div>
</body>
</html>